import { computed } from 'vue'
import { checkQuestProgress } from '../lib/checkQuestProgress'
import { useQuestStore } from '../stores/questStore.ts'

export function useQuestProgress(fitbitData: any) {
  const questStore = useQuestStore()

  const dailyQuestProgress = computed(() => {
    return questStore.dailyQuests.map(quest => ({
      quest,
      ...checkQuestProgress(quest, fitbitData),
    }))
  })

  const weeklyQuestProgress = computed(() => {
    return questStore.weeklyQuests.map(quest => ({
      quest,
      ...checkQuestProgress(quest, fitbitData),
    }))
  })

  return { dailyQuestProgress, weeklyQuestProgress }
}
